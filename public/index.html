<!DOCTYPE html>
<html>
<head>
  <title>Chitkara Qualifier API Tester</title>
  <style>
    body {
      font-family: Arial;
      padding: 20px;
      background: #f5f5f5;
    }
    h2 { color: #333; }
    .card {
      background: white;
      padding: 15px;
      margin-bottom: 15px;
      border-radius: 8px;
      box-shadow: 0 0 5px #ccc;
    }
    input, button {
      padding: 8px;
      width: 100%;
      margin-top: 5px;
    }
    pre {
      background: #222;
      color: #0f0;
      padding: 10px;
      overflow: auto;
    }
  </style>
</head>
<body>

<h1>Chitkara Qualifier API Tester</h1>
<p>Backend Health: <span id="healthStatus">Checking...</span></p>

<div class="card">
  <h2>Fibonacci</h2>
  <input id="fibInput" type="number" placeholder="Enter number (e.g. 7)">
  <button onclick="sendFib()">Submit Fibonacci</button>
</div>

<div class="card">
  <h2>Prime Filter</h2>
  <input id="primeInput" placeholder="Enter numbers comma separated (e.g. 2,4,7,9,11)">
  <button onclick="sendPrime()">Submit Prime</button>
</div>

<div class="card">
  <h2>LCM</h2>
  <input id="lcmInput" placeholder="Enter numbers comma separated">
  <button onclick="sendLCM()">Submit LCM</button>
</div>

<div class="card">
  <h2>HCF</h2>
  <input id="hcfInput" placeholder="Enter numbers comma separated">
  <button onclick="sendHCF()">Submit HCF</button>
</div>

<div class="card">
  <h2>AI Question</h2>
  <input id="aiInput" placeholder="Ask a question">
  <button onclick="sendAI()">Ask AI</button>
</div>

<h2>Response</h2>
<pre id="output"></pre>

<script>
async function checkHealth() {
  try {
    const res = await fetch("/health");
    await res.json();
    document.getElementById("healthStatus").innerText = "OK ✅";
  } catch (err) {
    document.getElementById("healthStatus").innerText = "Backend Not Reachable ❌";
  }
}

function showOutput(data) {
  document.getElementById("output").textContent = JSON.stringify(data, null, 2);
}


async function sendFib() {
  const n = Number(document.getElementById("fibInput").value);
  const res = await fetch("/bfhl", {
    method: "POST",
    headers: {"Content-Type": "application/json"},
    body: JSON.stringify({ fibonacci: n })
  });

  const data = await res.json();
  console.log("Fibonacci:", data.data);
  showOutput(data.data);
}


async function sendPrime() {
  const arr = document.getElementById("primeInput").value.split(",").map(Number);
  const res = await fetch("/bfhl", {
    method: "POST",
    headers: {"Content-Type": "application/json"},
    body: JSON.stringify({ prime: arr })
  });

  const data = await res.json();
  console.log("Prime:", data.data);
  showOutput(data.data);
}


async function sendLCM() {
  const arr = document.getElementById("lcmInput").value.split(",").map(Number);
  const res = await fetch("/bfhl", {
    method: "POST",
    headers: {"Content-Type": "application/json"},
    body: JSON.stringify({ lcm: arr })
  });

  const data = await res.json();
  console.log("LCM:", data.data);
  showOutput(data.data);
}


async function sendHCF() {
  const arr = document.getElementById("hcfInput").value.split(",").map(Number);
  const res = await fetch("/bfhl", {
    method: "POST",
    headers: {"Content-Type": "application/json"},
    body: JSON.stringify({ hcf: arr })
  });

  const data = await res.json();
  console.log("HCF:", data.data);
  showOutput(data.data);
}


async function sendAI() {
  const q = document.getElementById("aiInput").value;
  const res = await fetch("/bfhl", {
    method: "POST",
    headers: {"Content-Type": "application/json"},
    body: JSON.stringify({ AI: q })
  });

  const data = await res.json();
  console.log("AI:", data.data);
  showOutput(data.data);
}

checkHealth();
</script>


</body>
</html>
